#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ”’ Pre-commit Hook - ÙØ­Øµ Ø´Ø§Ù…Ù„ Ù‚Ø¨Ù„ ÙƒÙ„ commit
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

echo "ğŸ” Ø¨Ø¯Ø¡ ÙØ­ÙˆØµØ§Øª Pre-commit..."

# 1. ÙØ­Øµ TypeScript
echo "ğŸ“˜ ÙØ­Øµ TypeScript..."
npx tsc --noEmit || {
    echo "âŒ ÙØ´Ù„ ÙØ­Øµ TypeScript - ÙŠØ±Ø¬Ù‰ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡"
    exit 1
}

# 2. ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
echo "ğŸ§ª ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©..."
npm run test:unit --passWithNoTests 2>/dev/null || {
    echo "âš ï¸  ØªØ®Ø·ÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª (Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ùˆ Ø®Ø·Ø£)"
}

# 3. ØªØ´ØºÙŠÙ„ lint-staged
echo "âœ¨ ÙØ­Øµ lint-staged..."
npx lint-staged || {
    echo "âŒ ÙØ´Ù„ ÙØ­Øµ lint-staged"
    exit 1
}

echo "âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ù†Ø¬Ø­Øª!"
