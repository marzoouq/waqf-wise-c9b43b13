# ุชูุฑูุฑ ุงุฎุชุจุงุฑ ููุญุงุช ุงูุชุญูู - ุงููุณุฎุฉ ุงูููุงุฆูุฉ

## ุชุงุฑูุฎ ุงูุงุฎุชุจุงุฑ: 2025-11-29
## ุญุงูุฉ ุงูุงุฎุชุจุงุฑ: โ **ููุชูู ุจูุฌุงุญ - ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู**

---

## ๐ ููุญุฉ ุฃููู ุงูุฃุฑุดูู (Archivist Dashboard)

### โ ุญุงูุฉ ุงูุงุฎุชุจุงุฑ: **ูุงุฌุญ - ุชู ุงูุฅุตูุงุญ**

### ุงูุจูุงูุงุช ุงููุนููุฉ ุจุนุฏ ุงูุงุฎุชุจุงุฑ ูุงูุฅุตูุงุญ:
| ุงููุคุดุฑ | ุงููููุฉ | ุงูุญุงูุฉ |
|--------|--------|--------|
| ุงููุฌูุฏุงุช | **4** | โ ุชู ุฅุถุงูุฉ ูุฑุจุท |
| ุงููุณุชูุฏุงุช | **5** | โ ุชู ุฑุจุทูุง ุจุงููุฌูุฏุงุช |
| ุฑูุน ุงูููู | **1** | โ ูุณุชูุฏ ุฌุฏูุฏ |
| ุงููุณุงุญุฉ | ~7.8 MB | โ |

### ุงููุฌูุฏุงุช ุงููุชุงุญุฉ (ุจุนุฏ ุงูุฅุตูุงุญ):
| ุงููุฌูุฏ | ุนุฏุฏ ุงููููุงุช | ุงูุญุงูุฉ |
|--------|-------------|--------|
| ุงูุชูุงุฑูุฑ ุงููุงููุฉ | **2** | โ ูุฑุจูุท |
| ุงูุนููุฏ | **1** | โ ูุฑุจูุท |
| ุงููุณุชูุฏุงุช ุงููุงููููุฉ | **1** | โ ูุฑุจูุท |
| ูุญุงุถุฑ ุงูุงุฌุชูุงุนุงุช | **1** | โ ูุฑุจูุท |

### ุงููุธุงุฆู ุงููุฎุชุจุฑุฉ:
- โ ุนุฑุถ KPIs (4 ูุคุดุฑุงุช)
- โ ุงูุจุญุซ ูุงูููุชุฑุฉ
- โ ุนุฑุถ ุงููุณุชูุฏุงุช ุงูุฃุฎูุฑุฉ
- โ ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ (ุฑูุนุ ุฅูุดุงุก ูุฌูุฏุ ุจุญุซ)
- โ ุฅุฑุณุงู ุฑุณุงุฆู
- โ ุฑุจุท ุงููุณุชูุฏุงุช ุจุงููุฌูุฏุงุช

### ุงููุดุงูู ุงูุชู ุชู ุฅุตูุงุญูุง:
- โ **ุชู ุฅุตูุงุญ** Trigger `create_document_version` - ูุงู ูุญุงูู ุงููุตูู ูุนููุฏ `file_path` ุบูุฑ ููุฌูุฏ
  - ุชู ุชุนุฏูู ุงูุฏุงูุฉ ูุงุณุชุฎุฏุงู `name` ู `category` ุจุฏูุงู ูู `file_path`

### ุงูููู ุงูุฑุฆูุณู:
```
src/pages/ArchivistDashboard.tsx
```

---

## ๐ฐ ููุญุฉ ุฃููู ุงูุตูุฏูู (Cashier Dashboard)

### โ ุญุงูุฉ ุงูุงุฎุชุจุงุฑ: **ูุงุฌุญ**

### ุงูุจูุงูุงุช ุงููุนููุฉ:
| ุงููุคุดุฑ | ุงููููุฉ | ุงูุญุงูุฉ |
|--------|--------|--------|
| ุฑุตูุฏ ุงูุตูุฏูู | **1,550,000** ุฑ.ุณ | โ |
| ูููุฏ ูุณูุฏุฉ | **13** | โ |
| ุณูุฏุงุช ุตุฑู | **5** | โ |
| ูุณุชููุฏูู ูุดุทูู | **14** | โ |

### ุงูุญุณุงุจุงุช ุงูุจูููุฉ:
| ุงูุจูู | ุงูุฑุตูุฏ | ุงูุญุงูุฉ |
|-------|--------|--------|
| ูุตุฑู ุงูุฑุงุฌุญู | 750,000 ุฑ.ุณ | โ ูุดุท |
| ุงูุจูู ุงูุฃููู ุงูุณุนูุฏู | 500,000 ุฑ.ุณ | โ ูุดุท |
| ุงูุจูู ุงูุณุนูุฏู ููุงุณุชุซูุงุฑ | 300,000 ุฑ.ุณ | โ ูุดุท |

### ุณูุฏุงุช ุงูุตุฑู ุงููุฑุชุจุทุฉ ุจุงููุณุชููุฏูู:
| ุงูุณูุฏ | ุงููุจูุบ | ุงููุณุชููุฏ | ุงูุญุงูุฉ |
|-------|--------|----------|--------|
| PV-2024-0001 | 2,500 ุฑ.ุณ | ุญูุงู ูุฑุฒูู ุนูู ุงูุซุจูุชู | approved |
| PV-2024-0002 | 3,000 ุฑ.ุณ | ุนุจุฏุงูุฑุญูู ูุฑุฒูู ุนูู ุงูุซุจูุชู | paid |
| PV-2024-0003 | 2,800 ุฑ.ุณ | ุนูุงู ูุฑุฒูู ุนูู ุงูุซุจูุชู | draft |
| PV-2024-0004 | 3,200 ุฑ.ุณ | ุนุจุฏุงูุนุฒูุฒ ูุฑุฒูู ุนูู ุงูุซุจูุชู | approved |
| PV-2024-0005 | 1,500 ุฑ.ุณ | ุนุจุฏุงููู ูุฑุฒูู ุนูู ุงูุซุจูุชู | paid |

### ุงููุธุงุฆู ุงููุฎุชุจุฑุฉ:
- โ ุนุฑุถ KPIs (4 ูุคุดุฑุงุช)
- โ ุชุจููุจ ูุธุฑุฉ ุนุงูุฉ (ููุฎุต ุงูููู)
- โ ุชุจููุจ ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ (ุณูุฏ ูุจุถ/ุตุฑู)
- โ ุชุจููุจ ุงูุนูููุงุช ุงูุฃุฎูุฑุฉ
- โ ุฅุฑุณุงู ุฑุณุงุฆู
- โ AddReceiptDialog - ุฅูุดุงุก ุณูุฏ ูุจุถ ูุน ููุฏ ุชููุงุฆู
- โ AddVoucherDialog - ุฅูุดุงุก ุณูุฏ ุตุฑู ูุน ููุฏ ุชููุงุฆู

### ุงููููุงุช ุงูุฑุฆูุณูุฉ:
```
src/pages/CashierDashboard.tsx
src/hooks/useCashierStats.ts
src/components/payments/AddReceiptDialog.tsx
src/components/payments/AddVoucherDialog.tsx
```

---

## ๐ ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุดุงูู

### ุชูุงูู ุงูุฃุฑุดูู:
| ุงููููู | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|---------|
| folders โ documents | โ ูุนูู | ุชู ุฑุจุท ุฌููุน ุงููุณุชูุฏุงุช |
| ุงูุจุญุซ ูู ุงููุณุชูุฏุงุช | โ ูุนูู | ูุฏุนู ุงูุจุญุซ ุจุงูุงุณู |
| ููุชุฑุฉ ุญุณุจ ุงูุชุตููู | โ ูุนูู | 5 ุชุตูููุงุช ูุชุงุญุฉ |
| ุงูุชููู ููุฃุฑุดูู | โ ูุนูู | /archive |
| Trigger ุฅุตุฏุงุฑุงุช | โ ุชู ุงูุฅุตูุงุญ | ูุนูู ุจุฏูู ุฃุฎุทุงุก |

### ุชูุงูู ุงูุตูุฏูู:
| ุงููููู | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|---------|
| bank_accounts โ ุฑุตูุฏ ุงูุตูุฏูู | โ ูุนูู | 3 ุญุณุงุจุงุช ูุดุทุฉ |
| journal_entries โ ููุจูุถุงุช/ูุฏููุนุงุช | โ ูุนูู | ุชุชุจุน reference_type |
| payment_vouchers โ ุงููุณุชููุฏูู | โ ูุนูู | ูุฑุจูุท ุจู beneficiary_id |
| create_auto_journal_entry RPC | โ ููุฌูุฏ | ูุฏุนู 11 ููุน ุนูููุฉ |

### ุชูุงูู ุงููููุฏ ุงูุชููุงุฆูุฉ:
| ููุน ุงูุนูููุฉ | ุงูุญุงูุฉ | ุงูุญุณุงุจุงุช |
|-------------|--------|----------|
| payment_receipt | โ | ูุฏูู: ููุฏูุฉ / ุฏุงุฆู: ุฅูุฑุงุฏุงุช |
| payment_voucher | โ | ูุฏูู: ูุตุฑููุงุช / ุฏุงุฆู: ููุฏูุฉ |
| rental_payment | โ | ูุฏูู: ููุฏูุฉ / ุฏุงุฆู: ุฅูุฑุงุฏุงุช ุฅูุฌุงุฑ |
| maintenance_expense | โ | ูุฏูู: ุตูุงูุฉ / ุฏุงุฆู: ููุฏูุฉ |
| distribution | โ | ูุฏูู: ุชูุฒูุน / ุฏุงุฆู: ููุฏูุฉ |

---

## ๐ ููุฎุต ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### ุฃููู ุงูุฃุฑุดูู (Archivist):
| ุงูุตูุงุญูุฉ | ุงูุญุงูุฉ |
|----------|--------|
| ุฅุฏุงุฑุฉ ุงููุฌูุฏุงุช | โ |
| ุฑูุน ุงููุณุชูุฏุงุช | โ |
| ุชุตููู ุงููููุงุช | โ |
| ุงูุจุญุซ ูุงูููุชุฑุฉ | โ |
| ุฅุฑุณุงู ุฑุณุงุฆู | โ |
| ุตูุงุญูุงุช ูุงููุฉ | โ |

### ุฃููู ุงูุตูุฏูู (Cashier):
| ุงูุตูุงุญูุฉ | ุงูุญุงูุฉ |
|----------|--------|
| ุฅุฏุงุฑุฉ ุงูููุจูุถุงุช | โ |
| ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช | โ |
| ุฅูุดุงุก ุณูุฏุงุช | โ |
| ูุชุงุจุนุฉ ุงูุฑุตูุฏ | โ |
| ุฅุฑุณุงู ุฑุณุงุฆู | โ |
| ุงูููุงููุฉ ุงูููุงุฆูุฉ | โ |

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงูุชู ุชูุช

### 1. ุฅุตูุงุญ Trigger ุฅุตุฏุงุฑุงุช ุงููุณุชูุฏุงุช
```sql
-- ุชู ุชุนุฏูู create_document_version()
-- ูู: IF OLD.file_path IS DISTINCT FROM NEW.file_path
-- ุฅูู: IF OLD.name IS DISTINCT FROM NEW.name OR OLD.category IS DISTINCT FROM NEW.category
```

### 2. ุฑุจุท ุงููุณุชูุฏุงุช ุจุงููุฌูุฏุงุช
- ุชู ุฅุถุงูุฉ 4 ูุฌูุฏุงุช ุฌุฏูุฏุฉ
- ุชู ุฑุจุท 5 ูุณุชูุฏุงุช ุจุงููุฌูุฏุงุช ุงูููุงุณุจุฉ
- ุชู ุชุญุฏูุซ files_count ูู ูู ูุฌูุฏ

### 3. ุฅุถุงูุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑ
- ูุณุชูุฏ ุฌุฏูุฏ: "ูุดู ุญุณุงุจ ุจููู - ููููุจุฑ 2024"

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงูููุงุฆูุฉ

| ุงููุคุดุฑ | ุงููููุฉ |
|--------|--------|
| ุฅุฌูุงูู ุงููุฌูุฏุงุช | **4** |
| ุฅุฌูุงูู ุงููุณุชูุฏุงุช | **5** |
| ุฑุตูุฏ ุงูุตูุฏูู | **1,550,000** ุฑ.ุณ |
| ูููุฏ ูุณูุฏุฉ | **13** |
| ุณูุฏุงุช ุงูุตุฑู | **5** |
| ุงููุณุชููุฏูู ุงููุดุทูู | **14** |
| ุงูุนูุงุฑุงุช | **5** |

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

| ุงูููุญุฉ | ุงูุญุงูุฉ | ุงููุณุจุฉ | ููุงุญุธุงุช |
|--------|--------|--------|---------|
| ุฃููู ุงูุฃุฑุดูู | โ ุชุนูู | **100%** | ุชู ุฅุตูุงุญ trigger |
| ุฃููู ุงูุตูุฏูู | โ ุชุนูู | **100%** | ููุชูู |

### **ุงูููุญุชุงู ุฌุงูุฒุชุงู ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู** โ

---

## ๐ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

### ูุณุชุฎุฏู ุฃููู ุงูุฃุฑุดูู:
- ุงูุฏูุฑ: `archivist`
- ุงูุตูุงุญูุงุช: ุฅุฏุงุฑุฉ ุงูุฃุฑุดูู ููุท

### ูุณุชุฎุฏู ุฃููู ุงูุตูุฏูู:
- ุงูุฏูุฑ: `cashier`
- ุงูุตูุงุญูุงุช: ุฅุฏุงุฑุฉ ุงูููุจูุถุงุช ูุงููุฏููุนุงุช

---

*ุชู ุฅูุดุงุก ูุฐุง ุงูุชูุฑูุฑ ุชููุงุฆูุงู ุจุชุงุฑูุฎ 2025-11-29*
