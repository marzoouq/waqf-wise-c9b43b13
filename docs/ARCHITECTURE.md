# Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ - Waqf Platform Architecture

## Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆÙ‚Ù Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ù‡Ù†Ø¯Ø³Ø© Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø­Ø¯ÙŠØ«Ø© ØªØªØ¨Ø¹ Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„ÙØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø·Ø¨Ù‚Ø§Øª (Layered Architecture) Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰:
- **Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØµÙŠØ§Ù†Ø©**: ÙƒÙˆØ¯ Ù…Ù†Ø¸Ù… ÙˆÙ‚Ø§Ø¨Ù„ Ù„Ù„ØªØ·ÙˆÙŠØ±
- **Ø§Ù„Ø£Ù…Ø§Ù†**: RLS policies Ùˆ role-based access
- **Ø§Ù„Ø£Ø¯Ø§Ø¡**: React Query caching Ùˆ optimized queries
- **Ø§Ù„ØªÙˆØ³Ø¹**: Service layer pattern

---

## ğŸ“‚ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª

```
src/
â”œâ”€â”€ components/          # Ù…ÙƒÙˆÙ†Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
â”‚   â”œâ”€â”€ accounting/      # Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ù‚ÙŠÙˆØ¯
â”‚   â”œâ”€â”€ beneficiary/     # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†
â”‚   â”œâ”€â”€ dashboard/       # Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
â”‚   â”œâ”€â”€ distributions/   # Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª
â”‚   â”œâ”€â”€ property/        # Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
â”‚   â”œâ”€â”€ reports/         # Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
â”‚   â””â”€â”€ ui/              # Ù…ÙƒÙˆÙ†Ø§Øª shadcn/ui
â”‚
â”œâ”€â”€ hooks/               # React Hooks Ù…Ù†Ø¸Ù…Ø© Ø­Ø³Ø¨ Ø§Ù„Ù…ÙŠØ²Ø© (300+ hook)
â”‚   â”œâ”€â”€ accounting/      # hooks Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©
â”‚   â”œâ”€â”€ auth/            # hooks Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”œâ”€â”€ beneficiary/     # hooks Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†
â”‚   â”œâ”€â”€ dashboard/       # hooks Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
â”‚   â”œâ”€â”€ distributions/   # hooks Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª
â”‚   â””â”€â”€ ...              # 38 Ù…Ø¬Ù„Ø¯ ÙØ±Ø¹ÙŠ
â”‚
â”œâ”€â”€ services/            # Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Business Logic)
â”‚   â”œâ”€â”€ accounting.service.ts
â”‚   â”œâ”€â”€ beneficiary.service.ts
â”‚   â”œâ”€â”€ distribution.service.ts
â”‚   â”œâ”€â”€ dashboard.service.ts
â”‚   â”œâ”€â”€ reports.service.ts
â”‚   â””â”€â”€ ...              # 60+ Ø®Ø¯Ù…Ø©
â”‚
â”œâ”€â”€ types/               # TypeScript Types
â”œâ”€â”€ lib/                 # Utilities & Helpers
â”œâ”€â”€ pages/               # ØµÙØ­Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
â””â”€â”€ integrations/        # Supabase Client
```

---

## ğŸ—ï¸ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

### 1. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¹Ø±Ø¶ (Presentation Layer)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©**: Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

```
Pages â†’ Components â†’ UI Components
```

- **Pages**: ØµÙØ­Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (~60 ØµÙØ­Ø©)
- **Components**: Ù…ÙƒÙˆÙ†Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (600+ Ù…ÙƒÙˆÙ† ÙÙŠ 44 Ù…Ø¬Ù„Ø¯)
- **UI**: Ù…ÙƒÙˆÙ†Ø§Øª shadcn/ui Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### 2. Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ù†Ø·Ù‚ (Logic Layer)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©**: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ±Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```
Hooks â† React Query â† Services
```

- **Hooks**: 300+ hook Ù…Ù†Ø¸Ù…Ø© ÙÙŠ 38 Ù…Ø¬Ù„Ø¯
- **React Query**: caching, invalidation, real-time updates
- **State Management**: React Context Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©

### 3. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª (Service Layer)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©**: Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```typescript
// Ù…Ø«Ø§Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… Service
import { BeneficiaryService } from '@/services';

const beneficiaries = await BeneficiaryService.getAll();
```

**Services Ø§Ù„Ù…ØªÙˆÙØ±Ø© (60+ Ø®Ø¯Ù…Ø©):**

| Service | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|---------|---------|
| AccountingService | Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© ÙˆØ§Ù„Ù‚ÙŠÙˆØ¯ |
| ApprovalService | Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª |
| ArchiveService | Ø§Ù„Ø£Ø±Ø´ÙØ© |
| AuditService | Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª |
| AuthService | Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |
| BankReconciliationService | Ø§Ù„ØªØ³ÙˆÙŠØ© Ø§Ù„Ø¨Ù†ÙƒÙŠØ© |
| BeneficiaryService | Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† |
| ChatbotService | Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¢Ù„ÙŠØ© |
| ContractService | Ø§Ù„Ø¹Ù‚ÙˆØ¯ |
| DashboardService | Ù„ÙˆØ­Ø§Øª Ø§Ù„ØªØ­ÙƒÙ… Ùˆ KPIs |
| DistributionService | Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª |
| DocumentationService | Ø§Ù„ØªÙˆØ«ÙŠÙ‚ |
| EdgeFunctionService | Edge Functions |
| FiscalYearService | Ø§Ù„Ø³Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| FundService | Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚ |
| GovernanceService | Ø§Ù„Ø­ÙˆÙƒÙ…Ø© |
| IntegrationService | Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª |
| InvoiceService | Ø§Ù„ÙÙˆØ§ØªÙŠØ± |
| KnowledgeService | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© |
| LoansService | Ø§Ù„Ù‚Ø±ÙˆØ¶ ÙˆØ§Ù„Ø£Ù‚Ø³Ø§Ø· |
| MaintenanceService | Ø§Ù„ØµÙŠØ§Ù†Ø© |
| MessageService | Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© |
| MonitoringService | Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© |
| NotificationService | Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª |
| NotificationSettingsService | Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª |
| PaymentService | Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª |
| POSService | Ù†Ù‚Ø§Ø· Ø§Ù„Ø¨ÙŠØ¹ |
| PropertyService | Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙˆØ§Ù„ÙˆØ­Ø¯Ø§Øª |
| RealtimeService | Realtime subscriptions |
| ReportsService | Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© |
| ReportService | Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± |
| RequestService | Ø§Ù„Ø·Ù„Ø¨Ø§Øª |
| SecurityService | Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª |
| SettingsService | Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª |
| StorageService | Ø§Ù„ØªØ®Ø²ÙŠÙ† |
| SystemService | Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© |
| TenantService | Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙŠÙ† |
| TribeService | Ø§Ù„Ù‚Ø¨Ø§Ø¦Ù„ |
| UIService | ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| UserService | Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |
| VoucherService | Ø§Ù„Ø³Ù†Ø¯Ø§Øª |

### 4. Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data Layer)
**Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©**: Supabase + PostgreSQL

- **231 Ø¬Ø¯ÙˆÙ„** ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- **675 Ø³ÙŠØ§Ø³Ø© RLS** Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- **50 Edge Function** Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©
- **200 Database Trigger** Ù„Ù„Ø£ØªÙ…ØªØ©

---

## ğŸ” Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ø§Ù„Ø£Ø¯ÙˆØ§Ø± (7 Ø£Ø¯ÙˆØ§Ø±)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   admin     â”‚   nazer     â”‚ accountant  â”‚   cashier     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  archivist  â”‚ beneficiary â”‚  waqf_heir  â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒÙ„ Ø¯ÙˆØ±:

| Ø§Ù„Ø¯ÙˆØ± | Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª |
|-------|-----------|
| **admin** | Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª + Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… |
| **nazer** | Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª + Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª + Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„Ø© |
| **accountant** | Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© + Ø§Ù„Ù‚ÙŠÙˆØ¯ + Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ© |
| **cashier** | Ø§Ù„ØªØ­ØµÙŠÙ„ + Ø§Ù„ØµØ±Ù + Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ |
| **archivist** | Ø§Ù„Ø£Ø±Ø´ÙØ© + Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª |
| **beneficiary** | Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙÙ‚Ø· |
| **waqf_heir** | Ø´ÙØ§ÙÙŠØ© ÙƒØ§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ‚Ù |

---

## ğŸ“Š ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Action                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Component (UI Layer)                      â”‚
â”‚                    - Event handlers                          â”‚
â”‚                    - Form validation                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Hook (Logic Layer)                        â”‚
â”‚                    - useQuery / useMutation                  â”‚
â”‚                    - Cache management                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Service (Business Layer)                  â”‚
â”‚                    - Business logic                          â”‚
â”‚                    - Validation                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Supabase (Data Layer)                     â”‚
â”‚                    - RLS Policies                            â”‚
â”‚                    - PostgreSQL                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Real-time Updates

### Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù…ÙˆØ­Ø¯Ø©

```typescript
// Ù…Ø«Ø§Ù„: useNazerDashboardRealtime
const tables = [
  'beneficiaries',
  'properties', 
  'contracts',
  'payments',
  'journal_entries',
  'distributions',
  // ...
];

RealtimeService.subscribeToMultiple(tables, handleChange);
```

### Query Invalidation

```typescript
// Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
queryClient.invalidateQueries({ queryKey: ['unified-dashboard-kpis'] });
```

---

## ğŸ“ˆ Ø§Ù„Ø£Ø¯Ø§Ø¡

### Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ†

1. **Parallel Queries**: `Promise.all` Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† sequential
2. **Caching**: `staleTime: 2 minutes`
3. **Lazy Loading**: ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
4. **Virtualization**: Ù„Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø·ÙˆÙŠÙ„Ø©
5. **Lazy Dialogs**: ØªØ­Ù…ÙŠÙ„ ÙƒØ³ÙˆÙ„ Ù„Ù„Ø­ÙˆØ§Ø±Ø§Øª (v2.9.14)

### React Query Config

```typescript
const QUERY_CONFIG = {
  REPORTS: {
    staleTime: 2 * 60 * 1000,      // 2 minutes
    refetchOnWindowFocus: true,
    refetchInterval: 5 * 60 * 1000  // 5 minutes
  }
};
```

---

## ğŸ—ï¸ Context Pattern (v2.9.14)

### Ø¥Ø¯Ø§Ø±Ø© Props Drilling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Users Page                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UsersProvider          UsersDialogsProvider                â”‚
â”‚       â”‚                        â”‚                            â”‚
â”‚       â–¼                        â–¼                            â”‚
â”‚  UsersContext            UsersDialogsContext                â”‚
â”‚       â”‚                        â”‚                            â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                    â–¼                                        â”‚
â”‚           UsersTableWithContext (0 props)                   â”‚
â”‚                    â”‚                                        â”‚
â”‚                    â–¼                                        â”‚
â”‚         UsersTableRowWithContext (1 prop)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Contexts Ø§Ù„Ù…ØªÙˆÙØ±Ø©

| Context | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|---------|---------|
| `UsersContext` | Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |
| `UsersDialogsContext` | Ø­Ø§Ù„Ø© Ø­ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† |
| `RolesContext` | Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø£Ø¯ÙˆØ§Ø± |
| `AuthContext` | Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ |

---

## ğŸ§ª Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±

- **TypeScript**: ØªØºØ·ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø£Ù†ÙˆØ§Ø¹
- **ESLint**: Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙƒÙˆØ¯
- **Error Boundaries**: Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
- **Logging**: Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø´Ø§Ù…Ù„
- **Lazy Loading**: Ù„Ù„Ø­ÙˆØ§Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©

---

## ğŸ“š Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹

- [Supabase Documentation](https://supabase.com/docs)
- [React Query](https://tanstack.com/query)
- [shadcn/ui](https://ui.shadcn.com)
- [Tailwind CSS](https://tailwindcss.com)

---

**Ø§Ù„Ø¥ØµØ¯Ø§Ø±**: 3.0.0  
**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«**: 2025-12-22
