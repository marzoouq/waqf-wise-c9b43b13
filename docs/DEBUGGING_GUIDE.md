# ๐ง ุฏููู ุงูุชุตุญูุญ ุงูุดุงูู | Debugging Guide

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ูุธุงู ุงูุชุตุญูุญ ูุงูุงุณุชุฑุฏุงุฏ ุงููุชูุงูู ูู ููุตุฉ ุฅุฏุงุฑุฉ ุงูููู ุงูุฅููุชุฑูููุฉ.

---

## ๐ ุงูุจููุฉ ุงูุชุญุชูุฉ ููุชุตุญูุญ

### ุงูููููุงุช ุงูุฑุฆูุณูุฉ

| ุงููููู | ุงููุตู | ุงูููู |
|--------|-------|-------|
| **Error Tracker** | ุชุชุจุน ูุชุณุฌูู ุงูุฃุฎุทุงุก | `src/lib/errors/tracker.ts` |
| **Self-Healing** | ูุธุงู ุงูุงุณุชุฑุฏุงุฏ ุงูุชููุงุฆู | `src/lib/selfHealing.ts` |
| **Error Boundaries** | ุญูุงูุฉ ุงูููููุงุช | `GlobalErrorBoundary.tsx` |
| **Production Logger** | ุชุณุฌูู ุงูุฅูุชุงุฌ | `src/lib/production-logger.ts` |
| **Health Monitor** | ูุฑุงูุจุฉ ุตุญุฉ ุงููุธุงู | `selfHealing.ts` |

---

## ๐ฅ๏ธ ุฃูุงูุฑ Console ูููุทูุฑูู

ุงูุชุญ DevTools (F12) ูุงุณุชุฎุฏู ูุฐู ุงูุฃูุงูุฑ:

```javascript
// ุนุฑุถ ุงูุฃุฎุทุงุก ุงููุณุฌูุฉ
window.waqfDebug.viewErrors()

// ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
window.waqfDebug.clearCache()

// ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
window.waqfDebug.reconnectDB()

// ูุฒุงููุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
window.waqfDebug.syncPending()

// ูุญุต ุตุญุฉ ุงููุธุงู
window.waqfDebug.healthStatus()
```

### ูุซุงู ุนูู ูุญุต ุงูุตุญุฉ:

```javascript
const health = await window.waqfDebug.healthStatus();
console.log(health);
// {
//   database: true,
//   localStorage: true,
//   network: true,
//   overall: "healthy" | "degraded" | "critical"
// }
```

---

## ๐ ุชุฏููุงุช ุงูุชุตุญูุญ ุงูุดุงุฆุนุฉ

### 1. ุดุงุดุฉ ุจูุถุงุก (White Screen)

**ุงูุฃุนุฑุงุถ:** ุงูุชุทุจูู ูุง ูุนุฑุถ ุฃู ูุญุชูู

**ุฎุทูุงุช ุงูุชุตุญูุญ:**

```
1. ุงูุชุญ DevTools โ Console
2. ุงุจุญุซ ุนู ุฃุฎุทุงุก JavaScript
3. ุชุญูู ูู Network tab ููุดู ุงูุทูุจุงุช
4. ุฌุฑุจ: window.waqfDebug.clearCache()
5. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (Ctrl+Shift+R)
```

**ุงูุฃุณุจุงุจ ุงูุดุงุฆุนุฉ:**
- ุฎุทุฃ ูู ูููู React
- ูุดู ูู ุฌูุจ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- ูุดููุฉ ูู ุงููุตุงุฏูุฉ

### 2. ุฃุฎุทุงุก ุงูุดุจูุฉ (Network Errors)

**ุงูุฃุนุฑุงุถ:** ุฑุณุงุฆู "Failed to fetch" ุฃู timeout

**ุฎุทูุงุช ุงูุชุตุญูุญ:**

```javascript
// 1. ูุญุต ุงูุงุชุตุงู
const health = await window.waqfDebug.healthStatus();

// 2. ุฅุฐุง ูุงู network: false
await window.waqfDebug.reconnectDB();

// 3. ูุฒุงููุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
await window.waqfDebug.syncPending();
```

**ูุธุงู ุงูุงุณุชุฑุฏุงุฏ ุงูุชููุงุฆู:**
- Circuit Breaker ููุชุญ ุจุนุฏ 5 ูุดูุงุช ูุชุชุงููุฉ
- ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ูุน Exponential Backoff
- Cache Fallback ููุจูุงูุงุช ุงููุญููุฉ ุณุงุจูุงู

### 3. ูุดุงูู ุงููุตุงุฏูุฉ (Auth Issues)

**ุงูุฃุนุฑุงุถ:** ุฅุนุงุฏุฉ ุชูุฌูู ูุชูุฑุฑุฉ ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

**ุฎุทูุงุช ุงูุชุตุญูุญ:**

```
1. ุงูุณุญ localStorage: localStorage.clear()
2. ุงูุณุญ ุงูููููุฒ ูููููุน
3. ุฃุนุฏ ุชุณุฌูู ุงูุฏุฎูู
4. ุชุญูู ูู ุตูุงุญูุฉ ุงูุฌูุณุฉ ูู DevTools โ Application
```

### 4. ุจุทุก ุงูุฃุฏุงุก (Performance Issues)

**ุงูุฃุนุฑุงุถ:** ุงุณุชุฌุงุจุฉ ุจุทูุฆุฉุ ุชุฌููุฏ ูุคูุช

**ุฎุทูุงุช ุงูุชุตุญูุญ:**

```javascript
// 1. ูุณุญ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
window.waqfDebug.clearCache();

// 2. ูุญุต Performance ูู DevTools
// - ุงูุชุญ Performance tab
// - ุณุฌู ุชูุงุนู
// - ุงุจุญุซ ุนู Long Tasks

// 3. ูุญุต Memory leaks
// - ุงูุชุญ Memory tab
// - ุฎุฐ Heap Snapshot
// - ูุงุฑู ุจูู snapshots
```

### 5. ูููู ูุง ูุธูุฑ (Missing Component)

**ุงูุฃุนุฑุงุถ:** ุฌุฒุก ูู ุงูุตูุญุฉ ูุงุฑุบ

**ุฎุทูุงุช ุงูุชุตุญูุญ:**

```
1. ุงูุชุญ React DevTools
2. ุชุญูู ูู ุดุฌุฑุฉ ุงูููููุงุช
3. ุงุจุญุซ ุนู ุงููููู ุงูููููุฏ
4. ุชุญูู ูู:
   - ูู ุงููููู mounted?
   - ูู ูุณุชูู ุงูุจูุงูุงุช (props)?
   - ูู ููุงู ุดุฑูุท ุนุฑุถ (conditional rendering)?
```

---

## ๐ก๏ธ ุงุณุชุฑุงุชูุฌูุงุช ุงูุงุณุชุฑุฏุงุฏ

### 1. Self-Healing System

```typescript
// ุงููุธุงู ูุนูู ุชููุงุฆูุงู
// ูุดูู:
// - RetryHandler: ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุน backoff
// - SmartCache: ุชุฎุฒูู ูุคูุช ุฐูู
// - AutoRecovery: ุงุณุชุฑุฏุงุฏ ุชููุงุฆู
// - HealthMonitor: ูุฑุงูุจุฉ ูุณุชูุฑุฉ
```

### 2. Circuit Breaker

```
ุงูุญุงูุงุช:
โโโโโโโโโโโ     5 ูุดูุงุช     โโโโโโโโโโโ
โ CLOSED  โ โโโโโโโโโโโโโโโบ โ  OPEN   โ
โโโโโโโโโโโ                 โโโโโโโโโโโ
     โฒ                           โ
     โ        30 ุซุงููุฉ           โ
     โ                           โผ
     โ                    โโโโโโโโโโโโโ
     โโโโโโโโโโโโโโโโโโโโ โ HALF-OPEN โ
           ูุฌุงุญ           โโโโโโโโโโโโโ
```

**ุงูุณููู:**
- **CLOSED:** ุงูุทูุจุงุช ุชูุฑ ุจุดูู ุทุจูุนู
- **OPEN:** ุฌููุน ุงูุทูุจุงุช ุชุฑูุถ ููุฑุงู (ุญูุงูุฉ)
- **HALF-OPEN:** ููุณูุญ ุจุทูุจ ูุงุญุฏ ููุงุฎุชุจุงุฑ

### 3. Cache Fallback

```typescript
// ุนูุฏ ูุดู ุงูุทูุจ:
// 1. ุงูุจุญุซ ูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
// 2. ุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุน ุชุญุฐูุฑ
// 3. ุฌุฏููุฉ ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูู ุงูุฎูููุฉ
```

### 4. Retry Mechanism

```
ุงููุญุงููุฉ 1 โ ูุดู โ ุงูุชุธุงุฑ 1 ุซุงููุฉ
ุงููุญุงููุฉ 2 โ ูุดู โ ุงูุชุธุงุฑ 2 ุซุงููุฉ
ุงููุญุงููุฉ 3 โ ูุดู โ ุงูุชุธุงุฑ 4 ุซุงููุฉ
ุงููุญุงููุฉ 4 โ ูุดู โ Circuit Breaker ููุชุญ
```

---

## โ๏ธ ูุณุชููุงุช ุงูุฃุฎุทุงุก (Error Severity)

| ุงููุณุชูู | ุงููุตู | ุงูุฅุฌุฑุงุก | ุงูููู |
|---------|-------|---------|-------|
| **critical** | ูุดู ุงููุธุงู ุจุงููุงูู | ุฅุดุนุงุฑ ููุฑู + ุชุณุฌูู + ูุญุงููุฉ ุงุณุชุฑุฏุงุฏ | ๐ด ุฃุญูุฑ |
| **high** | ุฎุทุฃ ุฑุฆูุณู ูุคุซุฑ ุนูู ุงููุธุงุฆู | ุชุณุฌูู + alert ูููุณุชุฎุฏู | ๐ ุจุฑุชูุงูู |
| **medium** | ุฎุทุฃ ุนุงุฏู ูุญุฏูุฏ ุงูุชุฃุซูุฑ | ุชุณุฌูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช | ๐ก ุฃุตูุฑ |
| **low** | ุชุญุฐูุฑ ุฃู ูุนูููุฉ | log ูู ุจูุฆุฉ ุงูุชุทููุฑ ููุท | ๐ต ุฃุฒุฑู |

### ุฃูุซูุฉ:

```typescript
// Critical - ูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช
{ severity: 'critical', message: 'Database connection failed' }

// High - ูุดู ุงููุตุงุฏูุฉ
{ severity: 'high', message: 'Authentication token expired' }

// Medium - ูุดู ุฌูุจ ุจูุงูุงุช ุซุงูููุฉ
{ severity: 'medium', message: 'Failed to load notifications' }

// Low - ุชุญุฐูุฑ ุฃุฏุงุก
{ severity: 'low', message: 'Slow query detected' }
```

---

## ๐งช ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุชุตุญูุญ ุฎุทุฃ "Failed to fetch"

```javascript
// 1. ูุญุต ุงูุญุงูุฉ
const health = await window.waqfDebug.healthStatus();
console.log('Health:', health);

// 2. ุฅุฐุง ูุงูุช ุงูุดุจูุฉ ุชุนููุ ุชุญูู ูู ุงูู Console
// ุงุจุญุซ ุนู: CORS errors, 401/403 errors, timeout

// 3. ุฅุฐุง ูุงู timeout
// - ูุฏ ูููู ุงูุฎุงุฏู ูุดุบูู
// - ุงูุชุธุฑ ูุฃุนุฏ ุงููุญุงููุฉ

// 4. ุฅุฐุง ูุงู 401/403
// - ุฌูุณุฉ ููุชููุฉ
// - ุณุฌู ุฎุฑูุฌ ูุฏุฎูู ุฌุฏูุฏ
```

### ูุซุงู 2: ุงูุชุนุงูู ูุน timeout

```javascript
// ุงููุธุงู ูุนุงูุฌ ูุฐุง ุชููุงุฆูุงู ุนุจุฑ:
// 1. Retry ูุน backoff
// 2. Cache fallback ุฅุฐุง ุชููุฑุช ุจูุงูุงุช ุณุงุจูุฉ
// 3. ุฅุธูุงุฑ ุฑุณุงูุฉ ูููุณุชุฎุฏู

// ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:
window.waqfDebug.clearCache();
await window.waqfDebug.reconnectDB();
```

### ูุซุงู 3: ุชุชุจุน ูุดููุฉ ุฃุฏุงุก

```javascript
// 1. ุงูุชุญ DevTools โ Performance
// 2. ุงุถุบุท Record
// 3. ููุฐ ุงูุฅุฌุฑุงุก ุงูุจุทูุก
// 4. ุฃููู ุงูุชุณุฌูู
// 5. ุงุจุญุซ ุนู:
//    - Long Tasks (> 50ms)
//    - Layout Shifts
//    - Forced Reflows

// ุงุณุชุฎุฏู React DevTools Profiler ููุดุงูู React
```

### ูุซุงู 4: ุงุณุชุนุงุฏุฉ ุงููุธุงู ุจุนุฏ ุงููุทุงุน

```javascript
// ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู:
// 1. ุงููุธุงู ููุชุดู ุชููุงุฆูุงู ุนุจุฑ HealthMonitor
// 2. ูุจุฏุฃ ูุฒุงููุฉ ุงูุจูุงูุงุช ุงููุนููุฉ
// 3. ูุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ุงููุงูุฉ

// ูุฏููุงู:
await window.waqfDebug.syncPending();
await window.waqfDebug.reconnectDB();
// ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ
location.reload();
```

---

## ๐๏ธ ุฃุฏูุงุช ุงููุทูุฑ

### ุตูุญุฉ ุฃุฏูุงุช ุงููุทูุฑ

ุงููุตูู: `/developer-tools`

ุชุดูู 10 ููุญุงุช:
1. **Overview** - ูุธุฑุฉ ุนุงูุฉ ุนูู ุงููุธุงู
2. **Errors** - ุณุฌู ุงูุฃุฎุทุงุก
3. **Performance** - ููุงููุณ ุงูุฃุฏุงุก
4. **Network** - ุญุงูุฉ ุงูุดุจูุฉ
5. **Cache** - ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
6. **Database** - ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
7. **Auth** - ูุนูููุงุช ุงููุตุงุฏูุฉ
8. **Logs** - ุงูุณุฌูุงุช
9. **Config** - ุงูุฅุนุฏุงุฏุงุช
10. **Testing** - ุฃุฏูุงุช ุงูุงุฎุชุจุงุฑ

### React Query DevTools

```javascript
// ูุชุงุญ ูู ุจูุฆุฉ ุงูุชุทููุฑ ููุท
// ูุธูุฑ ูู ุงูุฒุงููุฉ ุงูุณูููุฉ ุงููููู
// ูุนุฑุถ:
// - ุญุงูุฉ ุงูู Queries
// - ุงูุจูุงูุงุช ุงููุฎุฒูุฉ
// - ุงูู Mutations ุงูุฌุงุฑูุฉ
```

---

## ๐ ุงูุฏุนู

### ุนูุฏ ุงูุญุงุฌุฉ ูููุณุงุนุฏุฉ:

1. **ุงุฌูุน ุงููุนูููุงุช:**
   - ููุทุฉ ุดุงุดุฉ ููุฎุทุฃ
   - ูุญุชูู Console
   - ูุชูุฌุฉ `healthStatus()`
   - ุฎุทูุงุช ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุดููุฉ

2. **ุชูุงุตู:**
   - ุงูุจุฑูุฏ: support@waqf.sa
   - ุงูุชูุซูู: [docs.lovable.dev](https://docs.lovable.dev)

---

## ๐ ูุฑุงุฌุน ุฅุถุงููุฉ

- [ุฏููู Lovable ููุชุตุญูุญ](https://docs.lovable.dev/tips-tricks/troubleshooting)
- [React DevTools](https://react.dev/learn/react-developer-tools)
- [Chrome DevTools](https://developer.chrome.com/docs/devtools/)

---

ยฉ 2025 ููุตุฉ ุฅุฏุงุฑุฉ ุงูููู ุงูุฅููุชุฑูููุฉ
