# ๐๏ธ ูููู ูุดุฑูุน ููุตุฉ ุฅุฏุงุฑุฉ ุงูููู

> **ุงูุฅุตุฏุงุฑ**: 2.9.30 | **ุขุฎุฑ ุชุญุฏูุซ**: 2025-12-22

๐ **ูููุทูุฑูู ูุงูู AI Agents**: ุฑุงุฌุน [`AI_CODING_AGENT.md`](AI_CODING_AGENT.md) ููุฏููู ุงูุดุงูู

## ๐ ูููู ุงููุฌูุฏุงุช

```
src/
โโโ assets/              # ุงูุตูุฑ ูุงูุฃููููุงุช
โโโ components/          # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โโโ accounting/      # ููููุงุช ุงููุญุงุณุจุฉ
โ   โโโ archive/         # ููููุงุช ุงูุฃุฑุดูุฉ
โ   โโโ auth/            # ููููุงุช ุงููุตุงุฏูุฉ
โ   โโโ beneficiary/     # ููููุงุช ุงููุณุชููุฏูู
โ   โโโ contracts/       # ููููุงุช ุงูุนููุฏ
โ   โโโ dashboard/       # ููููุงุช ููุญุงุช ุงูุชุญูู
โ   โโโ distributions/   # ููููุงุช ุงูุชูุฒูุนุงุช
โ   โโโ families/        # ููููุงุช ุงูุนุงุฆูุงุช
โ   โโโ invoices/        # ููููุงุช ุงูููุงุชูุฑ
โ   โโโ loans/           # ููููุงุช ุงููุฑูุถ
โ   โโโ permissions/     # ููููุงุช ุงูุตูุงุญูุงุช
โ   โโโ properties/      # ููููุงุช ุงูุนูุงุฑุงุช
โ   โโโ requests/        # ููููุงุช ุงูุทูุจุงุช
โ   โโโ settings/        # ููููุงุช ุงูุฅุนุฏุงุฏุงุช
โ   โโโ ui/              # ููููุงุช Shadcn UI
โโโ config/              # ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
โโโ contexts/            # React Contexts
โโโ hooks/               # Custom Hooks
โ   โโโ accounting/      # hooks ุงููุญุงุณุจุฉ
โ   โโโ auth/            # hooks ุงููุตุงุฏูุฉ
โ   โโโ beneficiary/     # hooks ุงููุณุชููุฏูู
โ   โโโ ...
โโโ integrations/        # ุชูุงููุงุช ุฎุงุฑุฌูุฉ (Supabase)
โโโ lib/                 # ุงูููุชุจุงุช ูุงูุฃุฏูุงุช
โ   โโโ cache/           # ุฅุฏุงุฑุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
โ   โโโ errors/          # ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
โ   โโโ logger/          # ูุธุงู ุงูุณุฌูุงุช
โ   โโโ monitoring/      # ูุฑุงูุจุฉ ุงููุธุงู
โ   โโโ optimization/    # ุชุญุณูู ุงูุฃุฏุงุก
โ   โโโ pdf/             # ุฅูุดุงุก PDF
โ   โโโ utils/           # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โโโ pages/               # ุตูุญุงุช ุงูุชุทุจูู
โโโ routes/              # ุชูุฌููุงุช ุงูุชุทุจูู
โโโ types/               # ุฃููุงุน TypeScript
```

## ๐ ูุธุงู ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

### ุงูุฃุฏูุงุฑ ุงููุชุงุญุฉ
| ุงูุฏูุฑ | ุงููุตู | ุงููุณุคูููุงุช |
|-------|-------|------------|
| `nazer` | ุงููุงุธุฑ | ุตูุงุญูุงุช ูุงููุฉุ ุงูููุงููุงุช ุงูููุงุฆูุฉ |
| `admin` | ุงููุดุฑู | ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุฅุนุฏุงุฏุงุช |
| `accountant` | ุงููุญุงุณุจ | ุงููููุฏ ุงููุงููุฉ ูุงูุชูุงุฑูุฑ |
| `cashier` | ุฃููู ุงูุตูุฏูู | ูุนุงูุฌุฉ ุงููุฏููุนุงุช |
| `archivist` | ุงูุฃุฑุดููู | ุฅุฏุงุฑุฉ ุงููุณุชูุฏุงุช |
| `beneficiary` | ุงููุณุชููุฏ | ุนุฑุถ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ |
| `waqf_heir` | ูุงุฑุซ ุงูููู | ุดูุงููุฉ ูุงููุฉ ููุจูุงูุงุช |

### ุฏูุงู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
```typescript
// ุงูุชุญูู ูู ุฏูุฑ
public.is_admin_or_nazer()
public.is_staff_only()
public.is_financial_staff()
public.is_accountant()
public.is_cashier()
public.is_archivist()
public.has_role(user_id, role)
```

## ๐ ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ

### ุฌุฏุงูู ุงููุณุชุฎุฏููู
- `profiles` - ูููุงุช ุงููุณุชุฎุฏููู
- `user_roles` - ุฃุฏูุงุฑ ุงููุณุชุฎุฏููู
- `user_sessions` - ุฌูุณุงุช ุงููุณุชุฎุฏููู
- `two_factor_auth` - ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ

### ุฌุฏุงูู ุงููุณุชููุฏูู
- `beneficiaries` - ุจูุงูุงุช ุงููุณุชููุฏูู
- `families` - ุงูุนุงุฆูุงุช
- `heir_distributions` - ุชูุฒูุนุงุช ุงููุฑุซุฉ

### ุฌุฏุงูู ุงููุญุงุณุจุฉ
- `accounts` - ุดุฌุฑุฉ ุงูุญุณุงุจุงุช
- `journal_entries` - ุงููููุฏ ุงูููููุฉ
- `journal_entry_lines` - ุจููุฏ ุงููููุฏ
- `fiscal_years` - ุงูุณููุงุช ุงููุงููุฉ
- `bank_accounts` - ุงูุญุณุงุจุงุช ุงูุจูููุฉ

### ุฌุฏุงูู ุงูุนูุงุฑุงุช
- `properties` - ุงูุนูุงุฑุงุช
- `property_units` - ุงููุญุฏุงุช ุงูุนูุงุฑูุฉ
- `contracts` - ุงูุนููุฏ
- `rental_payments` - ุฏูุนุงุช ุงูุฅูุฌุงุฑ

### ุฌุฏุงูู ุงูุชูุฒูุนุงุช
- `distributions` - ุงูุชูุฒูุนุงุช
- `distribution_details` - ุชูุงุตูู ุงูุชูุฒูุน
- `distribution_approvals` - ููุงููุงุช ุงูุชูุฒูุน

## ๐ ูุณุงุฑุงุช ุงูููุงููุงุช

### ูุณุงุฑ ุงูุชูุฒูุน
```
ุฅูุดุงุก ุงูุชูุฒูุน โ ูุญุงูุงุฉ โ ูุฑุงุฌุนุฉ ุงููุญุงุณุจ โ ููุงููุฉ ุงููุงุธุฑ โ ุชูููุฐ
```

### ูุณุงุฑ ุงููุฑูุถ
```
ุชูุฏูู ุงูุทูุจ โ ูุฑุงุฌุนุฉ โ ููุงููุฉ ุงููุญุงุณุจ โ ููุงููุฉ ุงููุงุธุฑ โ ุงูุตุฑู
```

### ูุณุงุฑ ุงููุฒุนุงุช
```
ุชูุฏูู ุงูุทูุจ โ ุชูููู โ ููุงููุฉ โ ุตุฑู ููุฑู
```

## ๐ก๏ธ ุณูุงุณุงุช ุงูุฃูุงู (RLS)

### ูุจุงุฏุฆ ุงูุฃูุงู
1. **ุงูุนุฒู ุงููุงูู**: ุงููุณุชููุฏ ูุฑู ุจูุงูุงุชู ููุท
2. **ุงูุดูุงููุฉ ูููุฑุซุฉ**: ูุฑุซุฉ ุงูููู ูุฑูู ุฌููุน ุงูุจูุงูุงุช
3. **ุตูุงุญูุงุช ุงูููุธููู**: ุญุณุจ ุงูุฏูุฑ ูุงููุธููุฉ
4. **ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ**: ุชุดููุฑ ูุชุญูู ุตุงุฑู

### ุฃูุซูุฉ ุนูู ุงูุณูุงุณุงุช
```sql
-- ุงููุณุชููุฏ ูุฑู ุจูุงูุงุชู ููุท
CREATE POLICY "beneficiary_own_data" ON beneficiaries
FOR SELECT USING (user_id = auth.uid());

-- ุงูููุธููู ูุฑูู ุฌููุน ุงูุจูุงูุงุช
CREATE POLICY "staff_all_data" ON beneficiaries
FOR SELECT USING (public.is_staff_only());
```

## โก ุชุญุณููุงุช ุงูุฃุฏุงุก

### ุงุณุชุฑุงุชูุฌูุงุช ุงูุชุญุณูู
1. **React Query**: ุชุฎุฒูู ูุคูุช ุฐูู (staleTime: 2min)
2. **Lazy Loading**: ุชุญููู ูุณูู ููููููุงุช
3. **Promise.all**: ุงุณุชุนูุงูุงุช ูุชูุงุฒูุฉ
4. **Debouncing**: ุชุฃุฎูุฑ ุงูุจุญุซ
5. **Virtualization**: ููุงุฆู ุงูุชุฑุงุถูุฉ ููุจูุงูุงุช ุงููุจูุฑุฉ

### ูููุงุช ุงูุชุญุณูู
- `src/lib/queryOptimization.ts` - ุชุญุณูู ุงูุงุณุชุนูุงูุงุช
- `src/lib/lazyWithRetry.ts` - ุงูุชุญููู ุงููุณูู
- `src/lib/imageOptimization.ts` - ุชุญุณูู ุงูุตูุฑ

## ๐ฑ ุงูุชุตููู ุงููุชุฌุงูุจ

### ููุงุท ุงูุชููู
- `sm`: 640px (ููุจุงูู)
- `md`: 768px (ุชุงุจูุช)
- `lg`: 1024px (ูุงุจุชูุจ)
- `xl`: 1280px (ุดุงุดุฉ ูุจูุฑุฉ)

### ููููุงุช ุงูููุจุงูู
- `MobileCard` - ุจุทุงูุงุช ููููุจุงูู
- `MobileOptimizedLayout` - ุชุฎุทูุท ูุญุณู
- `BottomNavigation` - ุชููู ุณููู

## ๐ง ุฃุฏูุงุช ุงูุชุทููุฑ

### Scripts
```bash
npm run dev              # ุชุดุบูู ุงูุชุทููุฑ
npm run build            # ุจูุงุก ุงูุฅูุชุงุฌ
npm run lint             # ูุญุต ุงูููุฏ
npx vitest run           # ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
npx vitest run --coverage # ุงูุงุฎุชุจุงุฑุงุช ูุน ุงูุชุบุทูุฉ
npx playwright test      # ุงุฎุชุจุงุฑุงุช E2E
```

### ุงูุฃุฏูุงุช ุงููุณุชุฎุฏูุฉ
- **React Query DevTools**: ูุฑุงูุจุฉ ุงูุงุณุชุนูุงูุงุช
- **TypeScript**: ูุธุงู ุงูุฃููุงุน
- **ESLint + Prettier**: ุชูุณูู ุงูููุฏ
- **Vitest**: ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (11,000+ ุงุฎุชุจุงุฑ)
- **Playwright**: ุงุฎุชุจุงุฑุงุช E2E

## ๐ ูุนุงููุฑ ุงูููุฏ

### ุชุณููุฉ ุงููููุงุช
- ุงูููููุงุช: `PascalCase.tsx`
- ุงูู Hooks: `useCamelCase.ts`
- ุงูุฃุฏูุงุช: `camelCase.ts`
- ุงูุฃููุงุน: `camelCase.ts`

### ูููู ุงููููู
```typescript
// 1. ุงูุงุณุชูุฑุงุฏุงุช
import { ... } from '...';

// 2. ุงูุฃููุงุน
interface Props { ... }

// 3. ุงููููู
export function Component({ ... }: Props) {
  // 3.1 ุงูู Hooks
  // 3.2 ุงููุชุบูุฑุงุช ุงููุญููุฉ
  // 3.3 ุงูุฏูุงู
  // 3.4 ุงูุนุฑุถ
  return <div>...</div>;
}
```

## ๐๏ธ ุงูุณููุงุช ุงููุงููุฉ

### ุงูุณูุฉ ุงููุงููุฉ 2024-2025
- **ุงููุชุฑุฉ**: 25/10/2024 - 24/10/2025
- **ุงูุญุงูุฉ**: ูุบููุฉ (ูููุฑุงุกุฉ ููุท)
- **ุฅุฌูุงูู ุงูุชูุฒูุนุงุช**: 995,000 ุฑ.ุณ

### ุงูุณูุฉ ุงููุงููุฉ 2025-2026
- **ุงููุชุฑุฉ**: 25/10/2025 - ูุณุชูุฑุฉ
- **ุงูุญุงูุฉ**: ูุดุทุฉ

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุณุงุนุฏุฉ ุงูุชูููุฉ:
- ูุฑุงุฌุนุฉ [`AI_CODING_AGENT.md`](AI_CODING_AGENT.md) - ุฏููู ุดุงูู ููู AI Agents ูุงููุทูุฑูู
- ูุฑุงุฌุนุฉ [`docs/ARCHITECTURE_RULES.md`](docs/ARCHITECTURE_RULES.md) - ููุงุนุฏ ุตุงุฑูุฉ
- ูุฑุงุฌุนุฉ `src/hooks/README.md` ููู Hooks
- ูุฑุงุฌุนุฉ `src/services/README.md` ููู Services
- ูุฑุงุฌุนุฉ `src/lib/query-keys/` ููู Query Keys (400+ ูู 8 ูููุงุช)
